<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='js/cordial.js'></script>
    <script src="js/jquery.js"></script>
</head>
<body>

    <textarea id="em"></textarea>


    
    <input type="file" id="csvFileInput" />
    <script>
        // Function to convert CSV to JSON
function csvToJson(csv) {
    const lines = csv.split('\n');
    const result = [];
    const headers = lines[0].split(',');

    for (let i = 1; i < lines.length; i++) {
        const obj = {};
        const currentLine = lines[i].split(',');

        for (let j = 0; j < headers.length; j++) {
            obj[headers[j].trim()] = currentLine[j]?.trim();
        }
        result.push(obj);
    }
    return result;
}

// Function to read the CSV file and convert it to JSON
function convertCSVFileToJSON(fileInput) {
    const file = fileInput.files[0];
    const reader = new FileReader();
    
    reader.onload = function(event) {
        const csv = event.target.result;
        const json = csvToJson(csv);
        console.log(json);
        $("#em").val(JSON.stringify(json));
    };
    
    reader.readAsText(file);
}



// Attach event listener to input
document.getElementById('csvFileInput').addEventListener('change', function(e) {
    convertCSVFileToJSON(e.target);
});

    </script>
</body>
</html>